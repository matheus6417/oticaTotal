(function(e){function t(t){var a=t+" .active",r=e(t+' a[data-w-tab="Default"].active').length>0;return e(a).length-r?1:0}function a(t,a){e(t+" a").on("click",function(){setTimeout(function(){l(t,b).length>0?(e(a).removeClass("disabled"),i(!1,t)):e(a).addClass("disabled")},350)})}function r(a,r){e(a+" a").on("click",function(){t(a)>0?(e(r).removeClass("disabled"),i(!1,a)):e(r).addClass("disabled")})}function i(e,t){switch(t){case I:c(e,J);break;case N:c(e,E);break;case A:c(e,W);break;case B:c(e,P)}}function n(t){var a=t+' a[data-w-tab="Default"]',r=e(a);setTimeout(function(){r.click()},0)}function s(t){e(t+" a").on("click",function(){e(t).find("a").each(function(){e(this).removeClass("active")}),e(this).addClass("active")})}function o(t){e(t+" a").on("click",function(){e(this).hasClass("active")?(e(this).removeClass("active"),n(t)):e(this).addClass("active")})}function l(t,a){return e(t).children().filter(function(){return e(this).css("background-color")==a})}function c(t,a){t?(e(a+" h2 span").show(),e(a+" .error-label").show()):(e(a+" h2 span").hide(),e(a+" .error-label").hide())}function d(){var t={},a=l(I,b),r=e.map(e(a),function(t){return e(t).data("problems")}),i=r.filter(function(e){return"default"!==e});localStorage.setItem(w,JSON.stringify(i));var n=i.map(function(t){return e("[data-problems="+t+"]").text()});t.selectedFitProblems=n;var s=n.length>0;c(!s,J);var o=l(N,b),d=e.map(e(o),function(t){return e(t).data("perf")});localStorage.setItem(z,JSON.stringify(d)),selectedNodeTitles=e.map(e(o),function(t){return e(t).text()}),t.selectedPreferences=selectedNodeTitles;var u=o.length>0;c(!u,E);var h=l("#quiz-rx-tabs",b);selectedNodeTitles=e.map(e(h),function(t){return e(t).text()});var f="1"===e("#quiz-rx-checkbox-button").css("opacity");t.rx=selectedNodeTitles[0],t.strongRx=f,selectedNodeIDs=e.map(e(h),function(t){return e(t).data("rx")}),localStorage.setItem(C,JSON.stringify({rx:selectedNodeIDs[0],strong:f}));var p=h.length>0;c(!p,W);var m=l("#quiz-eye-exam",b);selectedNodeTitles=e.map(e(m),function(t){return e(t).text()}),t.eyeExam=selectedNodeTitles[0],selectedNodeIDs=e.map(e(m),function(t){return e(t).data("exam")}),localStorage.setItem(k,selectedNodeIDs[0]);var g=m.length>0;c(!g,P);var v=e("#quiz-name-field").val(),x=e("#quiz-email-field").val();t.name=v,t.email=x;var y=e("#quiz-email-field").is(":valid"),O=v.length>0&&x.length>0;O&&y?e(F+" h2 span").hide():e(F+" h2 span").show();var S=s&&u&&p&&g&&O;if(S&&y)t.webQuizCompleted=!0,localStorage.setItem(q,JSON.stringify(t)),e("#quiz-error-label").hide(),window.location.href="/quiz-results";else{var T="*Please scroll up and answer all questions to continue.";S&&!y&&(T="*Please enter a valid email address."),e("#quiz-error-label").text(T),e("#quiz-error-label").show()}}function u(t){var a=localStorage.getItem(w);if(a){var r=localStorage.getItem(O),i=JSON.parse(a),n=e(t).find("a.w--current");n.removeClass("w--current");var s=e(t).children().filter(function(){return i.indexOf(e(this).data("problems"))>-1});s.each(function(){e(this).addClass("active"),e(this).data("problems")===r&&e(this).addClass("w--current")}),s.length>0&&e("#btn-fit-assessment").removeClass("disabled")}}function h(){var t=localStorage.getItem(z);if(t){var a=JSON.parse(t),r=e(N).children().filter(function(){return a.indexOf(e(this).data("perf"))>-1});r.each(function(){e(this).addClass("active")}),r.length>0&&e("#btn-quiz-preferences").removeClass("disabled")}}function f(){var t=localStorage.getItem(C);if(t){var a=JSON.parse(t),r=a.rx,i=e(A).children().filter(function(){return r.indexOf(e(this).data("rx"))>-1});i.each(function(){e(this).css("background-color",b),e(this).css("color","white")}),i.length>0&&e("#btn-quiz-rx").removeClass("disabled");var n=e("#quiz-rx-checkbox-container");"plano"===e(i[0]).data("rx")?n.addClass("disabled"):n.removeClass("disabled"),a.strong&&e("#quiz-rx-checkbox-button").css("opacity",1)}}function p(){var t=localStorage.getItem(k),a=e(B).children().filter(function(){return t===e(this).data("exam")});a.each(function(){e(this).css("background-color",b),e(this).css("color","white")}),a.length>0&&e("#btn-quiz-eye-exam").removeClass("disabled")}function m(){var t=localStorage.getItem(q);if(t){var a=JSON.parse(t),r=a.name,i=a.email;null===r&&""===r||e("#quiz-name-field").val(r),null===i&&""===i||e("#quiz-email-field").val(i)}}function g(t,a,r){var i=!1,n=e(r).children().map(function(){return e(this).data(t)}).toArray(),s=a.map(function(){return e(this).data(t)}).toArray();n.forEach(function(a){var n=e(r).find("[data-"+t+"="+a+"]");s.indexOf(a)>-1?(e(n).removeClass("hidden"),i||(e(n).addClass("w--current"),e(n).addClass("active"),i=!0)):(e(n).addClass("hidden"),e(n).removeClass("w--current"))})}function v(){var t=localStorage.getItem(q);if(t){var a=JSON.parse(t);e("#quiz-results-title").text("Hi "+a.name+",");var r=localStorage.getItem(w);if(r){var i=JSON.parse(r),n=e(T).children().filter(function(){return i.indexOf(e(this).data("problems"))>-1});g("problems",n,T);var s=localStorage.getItem(z);if(s){var o=JSON.parse(s),l=e(D).children().filter(function(){return o.indexOf(e(this).data("perf"))>-1});g("perf",l,D),e("#quiz-results-rx-tab").text(a.rx);var c="The majority of people who wear glasses require single-vision prescriptions, which correct for one field of vision (near or distance).\n We can fill any lens type, out of any material, in any prescription. Otica Total lenses are individually made to match your 3D data and frame style. All lenses come standard with premium coatings and the option to add sun tints, transitions, blue-light blocking, or polarization.",d="Traditional bifocal lenses have a visible line that separates the lens into two powers, distance and reading.\n We can fill any lens type, out of any material, in any prescription. Otica Total lenses are individually made to match your 3D data and frame style. All lenses come standard with premium coatings and the option to add sun tints, transitions, blue-light blocking, or polarization.",u="Progressive or multifocal lenses have no visible line and correct for both distance vision, reading vision, and everything in between.\n For our state-of-the-are progressives, we automatically account for vertex distance and frame height to make sure the wearer can easily transition between distance and reading vision. Otica Total lenses are individually made to match your 3D data and frame style. All lenses come standard with premium coatings and the option to add sun tints, transitions, blue-light blocking, or polarization.",h="Want sunglasses or blue-light blocking computer glasses with no prescription? We custom-make those too.\n Otica Total lenses are individually made to match your 3D data and frame style. All lenses come standard with premium coatings and the option to add unique sun tints, transitions, blue-light blocking, or polarization.";"Single Vision (standard)"===a.rx?e("#quiz-results-rx-content").text(c):"Bifocal (with line)"===a.rx?e("#quiz-results-rx-content").text(d):"Progressive (no line)"===a.rx?e("#quiz-results-rx-content").text(u):"None (plano lenses)"===a.rx&&e("#quiz-results-rx-content").text(h);var f="Your prescription is up to date",p="For those purchasing prescription eyewear, the California Board of Optometry requires we use a valid prescription written less than 2 years ago. We accept a photo of your prescription or an email forwarded from your optician.",m="Your prescription is less than 2 years old, so you’re good to go!",v="For those purchasing prescription eyewear, the California Board of Optometry requires we use a valid prescription written less than 2 years ago. We accept a photo of your prescription or an email forwarded from your optician.",x="If your prescription is older than 2 years, you’re due for a checkup.",y="Don’t worry though, you can place an order anytime and provide an updated prescription when you have it.",b="It’s important to get your eye health examined periodically even if you aren’t experiencing any vision problems. For those purchasing prescription eyewear, the California Board of Optometry requires we use a valid prescription written less than 2 years ago. We accept a photo of your prescription or an email forwarded from your optician.",C="Contact your eye doctor to see if you’re due for a checkup.",k="Don’t worry though, you can place an order anytime and provide an updated prescription when you have it.",O="It’s important to get your eye health examined periodically even if you aren’t experiencing any vision problems. For those purchasing prescription eyewear, the California Board of Optometry requires we use a valid prescription written less than 2 years ago. We accept a photo of your prescription or an email forwarded from your optician.";"Over a year ago"===a.eyeExam?(e("#quiz-results-rx-warning-header").removeClass("hidden"),e("#quiz-results-rx-header-warning-title").text(x),e("#quiz-results-rx-header-desc").text(y),e("#quiz-results-rx-footnote").text(b)):"I'm not sure"===a.eyeExam?(e("#quiz-results-rx-warning-header").removeClass("hidden"),e("#quiz-results-rx-header-warning-title").text(C),e("#quiz-results-rx-header-desc").text(k),e("#quiz-results-rx-footnote").text(O)):"1-3 months ago"===a.eyeExam?(e("#quiz-results-rx-warning-header").addClass("hidden"),e("#quiz-results-rx-header-desc").addClass("hidden"),e("#quiz-results-rx-ok-header").removeClass("hidden"),e("#quiz-results-rx-header-ok-title").text(f),e("#quiz-results-rx-footnote").text(p)):"3-12 months ago"===a.eyeExam&&(e("#quiz-results-rx-warning-header").addClass("hidden"),e("#quiz-results-rx-header-desc").addClass("hidden"),e("#quiz-results-rx-ok-header").removeClass("hidden"),e("#quiz-results-rx-header-ok-title").text(m),e("#quiz-results-rx-footnote").text(v))}}}}function x(e){for(var t=window.location.search.substring(1),a=t.split("&"),r=0;r<a.length;r++){var i=a[r].split("=");if(i[0]==e)return i[1]}}function y(e,t){t&&Cookies.set(e,t)}e(document).ready(function(){var i=e("#quiz-rx-checkbox-container");if("/"===location.pathname)u(S);else if("/quiz-results"===location.pathname)v();else if("/quiz"===location.pathname){if(window.location.search.indexOf("source=home")>0){var n=localStorage.getItem(w);if(n){var l=JSON.parse(n);l.length>0&&e("html, body").animate({scrollTop:e("#look-for").offset().top},{duration:1e3,specialEasing:{width:"linear",height:"easeInOutCirc"}})}}e("#btn-see-results").on("click",d),u(I),h(),f(),p(),m(),e("#quiz-rx-tabs a").on("click",function(){"plano"===e(this).data("rx")?(i.addClass("disabled"),e("#quiz-rx-checkbox-button").css("opacity",0)):i.removeClass("disabled")}),t(I)>0?e("#btn-quiz-fit-problems").removeClass("disabled"):e("#btn-quiz-fit-problems").addClass("disabled")}o(S),o(I),s(T),s(D),r(I,"#btn-quiz-fit-problems"),a(N,"#btn-quiz-preferences"),a(A,"#btn-quiz-rx"),a(B,"#btn-quiz-eye-exam")});var b="rgb(34, 34, 34)",q="quizResults",w="selectedFitProblems",z="selectedPrefs",C="selectedRx",k="selectedEyeExam",O="lastSelectedProblem",S="#fit-assessment-tabs",I="#quiz-fit-assessment-tabs",N="#quiz-preferences-tabs",T="#quiz-results-fit-assessment-tabs",D="#quiz-results-preferences-tabs",J="#quiz",E="#look-for",P="#last-exam",W="#prescription",F="#customer-infos",A="#quiz-rx-tabs",B="#quiz-eye-exam";y("campaign",x("campaign")),y("channel",x("channel")),y("adset",x("adset")),y("ad",x("ad")),y("keyword",x("keyword")),y("gclid",x("gclid")),y("gcl",x("gcl")),y("gcid",x("gcid")),y("originReferrer",x("source"))})(jQuery);